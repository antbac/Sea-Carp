@model SeaCarp.ViewModels.AccountRegistrationViewModel
@{
    ViewData["Title"] = "Register Accout";
}

<div class="container">
    <main>
        <p id="error" style="display: none; color: red"></p>
        <h1>Register</h1>
        <br />

        <div class="row">
            <div class="col-md-4">
                <form id="register_form" method="post" action="/Identity/Register" novalidate="novalidate">
                    <h2>Create a new account.</h2>
                    <hr />
                    <div class="form-floating mb-3">
                        <input class="form-control" aria-required="true" placeholder="username" type="text" data-val-required="The Username field is required." id="Username" name="Username" value="">
                        <label for="Username">Username</label>
                        <span class="text-danger field-validation-valid" data-valmsg-for="Username" data-valmsg-replace="true"></span>
                        <div style="position: relative !important; height: 0px !important; width: 0px !important; float: left !important;"></div>
                    </div>
                    <div class="form-floating mb-3">
                        <input class="form-control" aria-required="true" placeholder="name@example.com" type="email" data-val-required="The Email field is required." id="Email" name="Email" value="">
                        <label for="Email">Email</label>
                        <span class="text-danger field-validation-valid" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                        <div style="position: relative !important; height: 0px !important; width: 0px !important; float: left !important;"></div>
                    </div>
                    <div class="form-floating mb-3">
                        <input class="form-control" aria-required="true" placeholder="password" type="password" data-val-required="The Password field is required." id="Password" name="Password">
                        <label for="Password">Password</label>
                        <span class="text-danger field-validation-valid" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                        <div style="position: relative !important; height: 0px !important; width: 0px !important; float: left !important;"></div>
                    </div>
                    <button id="registerSubmit" type="submit" class="w-100 btn btn-lg btn-primary">Register</button>
                </form>
            </div>
            <div class="col-md-8 col-md-offset-2">
                <section>
                    <h3>Join the world's premier community for sea life enthusiasts</h3>
                    <hr />

                    <div>
                        <img src="/images/SeaCarpDrawing.png" width="256" height="256" style="float: left; margin-right: 15px; margin-bottom: 15px;" />
                        <p style="text-align: justify;">
                            Welcome to the web's premier destination for all things sea carp! We're thrilled to have you here, whether you're a seasoned angler or just a curious enthusiast. Our site is dedicated to the fascinating world of these underwater wonders, from their impressive size and strength to their quirky habits and unique personalities. Dive into our articles and photos to discover everything you ever wanted to know about the sea carp, and maybe even a few things you didn't know you needed to know! So come on in, the water's fine – and so are the carp.
                        </p>
                    </div>
                </section>
            </div>
        </div>
    </main>
</div>

@section Scripts
{
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            document.querySelector('#register_form').onsubmit = (e) => {
                e.preventDefault();
                $.ajax({
                    url: '/Identity/Register',
                    type: 'POST',
                    data: {
                        'Username': document.querySelector('#Username').value,
                        'Email': document.querySelector('#Email').value,
                        'Password': document.querySelector('#Password').value,
                    },
                    dataType: 'json',
                    success: (data) => {
                        location = '/';
                    },
                    error: (request, error) => {
                        document.querySelector('#error').innerText = request.responseText;
                        document.querySelector('#error').style.display = 'inline';
                    }
                });
            };
        }, false);
    </script>
}